<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Gest√£o Escolar</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header" role="banner">
        <div class="header-content">
            <h1 class="logo">üëë Admin - Gest√£o Escolar</h1>
            <div class="user-info">
                <span id="userWelcome">Carregando...</span>
                <button type="button" id="perfilBtn" class="btn btn-secondary" style="margin-left: 10px; margin-right: 10px;">
                    üë§ Meu Perfil
                </button>
                <button type="button" id="logoutBtn" class="btn btn-secondary" style="margin-left: 5px;">
                    üö™ Logout
                </button>
            </div>
            <div class="search-container">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Buscar por nome do aluno..." 
                    aria-label="Buscar aluno por nome"
                    class="search-input"
                >
                <button type="button" class="search-btn" aria-label="Executar busca">
                    üîç
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar" role="complementary">
            <section class="filters-section">
                <h2>Filtros</h2>
                <div class="filter-group">
                    <label for="filterTurma">Turma:</label>
                    <select id="filterTurma" aria-label="Filtrar por turma">
                        <option value="">Todas as turmas</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filterStatus">Status:</label>
                    <select id="filterStatus" aria-label="Filtrar por status">
                        <option value="">Todos os status</option>
                        <option value="ativo">Ativo</option>
                        <option value="inativo">Inativo</option>
                    </select>
                </div>
                <button type="button" id="clearFilters" class="btn btn-secondary">
                    Limpar Filtros
                </button>
            </section>

            <section class="stats-section">
                <h2>Estat√≠sticas</h2>
                <div class="stat-item">
                    <span class="stat-label">Total de Alunos:</span>
                    <span id="totalAlunos" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Alunos Ativos:</span>
                    <span id="alunosAtivos" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Turmas:</span>
                    <span id="totalTurmas" class="stat-value">0</span>
                </div>
            </section>
        </aside>

        <!-- Content Area -->
        <section class="content-area" role="main">
            <div class="content-header">
                <nav class="tabs" role="tablist">
                    <button 
                        type="button" 
                        class="tab-btn active" 
                        data-tab="alunos"
                        role="tab"
                        aria-selected="true"
                        aria-controls="alunos-panel"
                        id="tab-alunos"
                    >
                        Alunos
                    </button>
                    <button 
                        type="button" 
                        class="tab-btn" 
                        data-tab="turmas"
                        role="tab"
                        aria-selected="false"
                        aria-controls="turmas-panel"
                        id="tab-turmas"
                    >
                        Turmas
                    </button>
                    <button 
                        type="button" 
                        class="tab-btn" 
                        data-tab="professores"
                        role="tab"
                        aria-selected="false"
                        aria-controls="professores-panel"
                        id="tab-professores"
                    >
                        Professores
                    </button>
                    <button 
                        type="button" 
                        class="tab-btn" 
                        data-tab="solicitacoes"
                        role="tab"
                        aria-selected="false"
                        aria-controls="solicitacoes-panel"
                        id="tab-solicitacoes"
                    >
                        Solicita√ß√µes
                    </button>
                    <button 
                        type="button" 
                        class="tab-btn" 
                        data-tab="relatorios"
                        role="tab"
                        aria-selected="false"
                        aria-controls="relatorios-panel"
                        id="tab-relatorios"
                    >
                        Relat√≥rios
                    </button>
                </nav>
                
                <div class="action-buttons">
                    <button type="button" id="newAlunoBtn" class="btn btn-primary admin-only" aria-label="Adicionar novo aluno" style="display: none;">
                        + Novo Aluno
                    </button>
                    <button type="button" id="newTurmaBtn" class="btn btn-primary admin-only" aria-label="Adicionar nova turma" style="display: none;">
                        + Nova Turma
                    </button>
                    <button type="button" id="newProfessorBtn" class="btn btn-primary admin-only" aria-label="Adicionar novo professor" style="display: none;">
                        + Novo Professor
                    </button>
                    <button type="button" id="newMatriculaBtn" class="btn btn-accent admin-only" aria-label="Nova matr√≠cula" style="display: none;">
                        + Nova Matr√≠cula
                    </button>
                </div>
            </div>

            <!-- Alunos Panel -->
            <div id="alunos-panel" class="tab-content active" role="tabpanel" aria-labelledby="tab-alunos">
                <div class="controls">
                    <div class="sort-controls">
                        <label for="sortAlunos">Ordenar por:</label>
                        <select id="sortAlunos" aria-label="Ordenar alunos">
                            <option value="nome">Nome (A-Z)</option>
                            <option value="nome-desc">Nome (Z-A)</option>
                            <option value="idade">Idade (Crescente)</option>
                            <option value="idade-desc">Idade (Decrescente)</option>
                        </select>
                    </div>
                </div>
                
                <div id="alunosList" class="data-grid" aria-live="polite" aria-label="Lista de alunos">
                    <!-- Alunos ser√£o carregados via JavaScript -->
                </div>
            </div>

            <!-- Turmas Panel -->
            <div id="turmas-panel" class="tab-content" role="tabpanel" aria-labelledby="tab-turmas">
                <div id="turmasList" class="data-grid" aria-live="polite" aria-label="Lista de turmas">
                    <!-- Turmas ser√£o carregadas via JavaScript -->
                </div>
            </div>

            <!-- Professores Panel -->
            <div id="professores-panel" class="tab-content" role="tabpanel" aria-labelledby="tab-professores">
                <div id="professoresList" class="data-grid" aria-live="polite" aria-label="Lista de professores">
                    <!-- Professores ser√£o carregados via JavaScript -->
                </div>
            </div>

            <!-- Solicita√ß√µes Panel -->
            <div id="solicitacoes-panel" class="tab-content" role="tabpanel" aria-labelledby="tab-solicitacoes">
                <div id="solicitacoesList" class="data-grid" aria-live="polite" aria-label="Lista de solicita√ß√µes de matr√≠cula">
                    <!-- Solicita√ß√µes ser√£o carregadas via JavaScript -->
                </div>
            </div>

            <!-- Relat√≥rios Panel -->
            <div id="relatorios-panel" class="tab-content" role="tabpanel" aria-labelledby="tab-relatorios">
                <div id="relatoriosContent">
                    <!-- Estat√≠sticas ser√£o inseridas aqui pelo JavaScript -->
                </div>
                <div class="export-section">
                    <h3>Exportar Dados</h3>
                    <div class="export-controls">
                        <button type="button" id="exportAlunosCSV" class="btn btn-secondary">
                            üìä Exportar Alunos (CSV)
                        </button>
                        <button type="button" id="exportAlunosJSON" class="btn btn-secondary">
                            üìÑ Exportar Alunos (JSON)
                        </button>
                        <button type="button" id="exportMatriculasCSV" class="btn btn-secondary">
                            üìä Exportar Matr√≠culas (CSV)
                        </button>
                        <button type="button" id="exportMatriculasJSON" class="btn btn-secondary">
                            üìÑ Exportar Matr√≠culas (JSON)
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal Novo Aluno -->
    <div id="modalAluno" class="modal" role="dialog" aria-labelledby="modalAlunoTitle" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="modalAlunoTitle">Novo Aluno</h2>
                <button type="button" class="close-btn" aria-label="Fechar modal">√ó</button>
            </header>
            <form id="alunoForm" class="modal-body">
                <div class="form-group">
                    <label for="alunoNome">Nome *</label>
                    <input 
                        type="text" 
                        id="alunoNome" 
                        name="nome" 
                        required 
                        minlength="3" 
                        maxlength="80"
                        aria-describedby="nomeHelp"
                    >
                    <small id="nomeHelp" class="form-help">Entre 3 e 80 caracteres</small>
                </div>
                
                <div class="form-group">
                    <label for="alunoDataNascimento">Data de Nascimento *</label>
                    <input 
                        type="date" 
                        id="alunoDataNascimento" 
                        name="data_nascimento" 
                        required
                        aria-describedby="dataHelp"
                    >
                    <small id="dataHelp" class="form-help">Aluno deve ter pelo menos 5 anos</small>
                </div>
                
                <div class="form-group">
                    <label for="alunoEmail">Email</label>
                    <input 
                        type="email" 
                        id="alunoEmail" 
                        name="email"
                        aria-describedby="emailHelp"
                    >
                    <small id="emailHelp" class="form-help">Email v√°lido (opcional)</small>
                </div>
                
                <div class="form-group">
                    <label for="alunoStatus">Status *</label>
                    <select id="alunoStatus" name="status" required>
                        <option value="">Selecione o status</option>
                        <option value="ativo">Ativo</option>
                        <option value="inativo">Inativo</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="alunoTurma">Turma</label>
                    <select id="alunoTurma" name="turma_id">
                        <option value="">Sem turma</option>
                    </select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelAlunoBtn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Nova Turma -->
    <div id="modalTurma" class="modal" role="dialog" aria-labelledby="modalTurmaTitle" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="modalTurmaTitle">Nova Turma</h2>
                <button type="button" class="close-btn" aria-label="Fechar modal">√ó</button>
            </header>
            <form id="turmaForm" class="modal-body">
                <div class="form-group">
                    <label for="turmaNome">Nome da Turma *</label>
                    <input 
                        type="text" 
                        id="turmaNome" 
                        name="nome" 
                        required 
                        minlength="2" 
                        maxlength="50"
                        aria-describedby="turmaHelp"
                    >
                    <small id="turmaHelp" class="form-help">Ex: 1¬∫ Ano A, 2¬∫ Ano B</small>
                </div>
                
                <div class="form-group">
                    <label for="turmaCapacidade">Capacidade *</label>
                    <input 
                        type="number" 
                        id="turmaCapacidade" 
                        name="capacidade" 
                        required 
                        min="1" 
                        max="50"
                        aria-describedby="capacidadeHelp"
                    >
                    <small id="capacidadeHelp" class="form-help">Entre 1 e 50 alunos</small>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelTurmaBtn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Nova Matr√≠cula -->
    <div id="modalMatricula" class="modal" role="dialog" aria-labelledby="modalMatriculaTitle" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="modalMatriculaTitle">Nova Matr√≠cula</h2>
                <button type="button" class="close-btn" aria-label="Fechar modal">√ó</button>
            </header>
            <form id="matriculaForm" class="modal-body">
                <div class="form-group">
                    <label for="matriculaAluno">Aluno *</label>
                    <select id="matriculaAluno" name="aluno_id" required>
                        <option value="">Selecione o aluno</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="matriculaTurma">Turma *</label>
                    <select id="matriculaTurma" name="turma_id" required>
                        <option value="">Selecione a turma</option>
                    </select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelMatriculaBtn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Matricular</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Novo Professor -->
    <div id="modalProfessor" class="modal" role="dialog" aria-labelledby="modalProfessorTitle" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="modalProfessorTitle">Novo Professor</h2>
                <button type="button" class="close-btn" aria-label="Fechar modal">√ó</button>
            </header>
            <form id="professorForm" class="modal-body">
                <div class="form-group">
                    <label for="professorNome">Nome Completo *</label>
                    <input 
                        type="text" 
                        id="professorNome" 
                        name="nome" 
                        required 
                        minlength="3" 
                        maxlength="100"
                        aria-describedby="professorNomeHelp"
                    >
                    <small id="professorNomeHelp" class="form-help">Nome completo do professor</small>
                </div>
                
                <div class="form-group">
                    <label for="professorEmail">Email *</label>
                    <input 
                        type="email" 
                        id="professorEmail" 
                        name="email" 
                        required
                        aria-describedby="professorEmailHelp"
                    >
                    <small id="professorEmailHelp" class="form-help">Email institucional do professor</small>
                </div>
                
                <div class="form-group">
                    <label for="professorEspecialidade">Especialidade *</label>
                    <input 
                        type="text" 
                        id="professorEspecialidade" 
                        name="especialidade" 
                        required
                        aria-describedby="professorEspecialidadeHelp"
                    >
                    <small id="professorEspecialidadeHelp" class="form-help">Ex: Matem√°tica, Portugu√™s, Hist√≥ria</small>
                </div>
                
                <div class="form-group">
                    <label for="professorTelefone">Telefone</label>
                    <input 
                        type="tel" 
                        id="professorTelefone" 
                        name="telefone"
                        aria-describedby="professorTelefoneHelp"
                    >
                    <small id="professorTelefoneHelp" class="form-help">Telefone de contato (opcional)</small>
                </div>
                
                <div class="form-group">
                    <label for="professorStatus">Status *</label>
                    <select id="professorStatus" name="status" required>
                        <option value="ativo">Ativo</option>
                        <option value="inativo">Inativo</option>
                        <option value="licenca">Em Licen√ßa</option>
                    </select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelProfessorBtn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Meu Perfil -->
    <div id="modalPerfil" class="modal" role="dialog" aria-labelledby="modalPerfilTitle" aria-hidden="true">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="modalPerfilTitle">üë§ Meu Perfil</h2>
                <button type="button" class="close-btn" aria-label="Fechar modal">√ó</button>
            </header>
            <div class="modal-body">
                <div id="perfilContent" class="perfil-content">
                    <div class="loading">Carregando informa√ß√µes do perfil...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast para feedback -->
    <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <span id="toastMessage"></span>
        <button type="button" class="toast-close" aria-label="Fechar notifica√ß√£o">√ó</button>
    </div>

    <script src="sistema_final.js"></script>
</body>
</html>
